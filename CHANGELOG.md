# Changelog

Все значимые изменения в этом проекте будут документированы в этом файле.

Формат основан на [Keep a Changelog](https://keepachangelog.com/ru/1.0.0/),
и этот проект следует [Semantic Versioning](https://semver.org/lang/ru/).

## [1.0.2] - 2025-01-15

### Добавлено

- **GitignoreManager**: Новый класс для автоматического управления `.gitignore` файлом

  - Автоматическое создание и обновление `.gitignore` в корне проекта
  - Правильное исключение всех правил Cursor AI из основного репозитория
  - Разрешение синхронизации указанных папок (например, `my-project`) с основным проектом
  - Интеграция с `RulesManager` для автоматического обновления при синхронизации

- **Защита от потери данных**: Система защиты от случайного удаления репозитория

  - Проверка наличия локальных файлов перед удалением из репозитория
  - Блокировка удаления при пустой или отсутствующей папке `.cursor/rules`
  - Подробное логирование действий защиты для отслеживания

- **Улучшенные коммиты**: Новый формат коммитов с датой и временем

  - Формат: "Обновление правил Cursor AI от ГГГГ-ММ-ДД ЧЧ:ММ:СС"
  - Лучшее отслеживание изменений и истории синхронизации

- **Настройки уведомлений**: Расширенная система управления уведомлениями
  - `showAutoSyncNotifications`: Включение/отключение уведомлений автосинхронизации (по умолчанию отключено)
  - `notificationTimeout`: Настройка времени отображения уведомлений (1000-10000ms, по умолчанию 3000ms)
  - Функция `showNotificationWithTimeout()` для всех уведомлений расширения

### Изменено

- **Логика синхронизации**: Улучшена для предотвращения потери данных

  - Добавлена проверка локальных файлов перед удалением из репозитория
  - Улучшена обработка случаев с пустой папкой `.cursor/rules`

- **Уведомления**: Оптимизировано время отображения и управление

  - Все уведомления теперь используют настраиваемый таймаут
  - Уведомления автосинхронизации по умолчанию отключены для избежания спама

- **Тестирование**: Добавлены тесты для новых функций
  - Полное покрытие тестами `GitignoreManager`
  - Тесты для настроек уведомлений
  - Тесты для защиты от потери данных

### Технические улучшения

- Добавлен новый файл `src/gitignoreManager.ts` с полной логикой управления `.gitignore`
- Интеграция `GitignoreManager` в `RulesManager` для автоматического обновления
- Улучшенная обработка ошибок и логирование
- Обновлена документация с описанием новых функций

## [1.0.0] - 2025-01-15

### Добавлено

- Основная функциональность синхронизации правил Cursor AI
- Команды для загрузки, отправки и синхронизации правил
- Разделение на локальные и глобальные правила
- Исключение папки `my-project` из синхронизации
- Статус правил с подробной информацией
- Конфигурация через настройки VS Code
- Полное покрытие тестами
- Автоматизация сборки и развертывания

### Технические улучшения

- TypeScript для типизированного кода
- ESLint для проверки качества кода
- Mocha для тестирования
- GitHub Actions для CI/CD
- Автоматическое версионирование
- Конфигурация отладки VS Code
- Подробная документация

### Структура проекта

- `src/extension.ts` - основной файл расширения
- `src/rulesManager.ts` - логика управления правилами
- `src/test/` - тесты и конфигурация тестирования
- `.github/workflows/` - автоматизация CI/CD
- Конфигурационные файлы для разработки

### Команды

- `Синхронизировать правила Cursor` - полная синхронизация
- `Загрузить правила из GitHub` - загрузка из репозитория
- `Отправить правила в GitHub` - отправка изменений
- `Показать статус правил` - просмотр состояния

### Конфигурация

- `cursorRulesManager.rulesRepoUrl` - URL репозитория
- `cursorRulesManager.globalRulesPath` - путь к глобальным правилам
- `cursorRulesManager.excludePatterns` - исключаемые папки
- `cursorRulesManager.autoSyncInterval` - интервал автосинхронизации
